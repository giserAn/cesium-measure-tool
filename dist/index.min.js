!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("Cesium")):"function"==typeof define&&define.amd?define(["Cesium"],t):"object"==typeof exports?exports.MeasureTool=t(require("Cesium")):e.MeasureTool=t(e.Cesium)}(self,(e=>(()=>{"use strict";var t={70:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=r(540),n=6378137;function o(e){var t=0;if(e&&e.length>0){t+=Math.abs(s(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(s(e[r]))}return t}function s(e){var t,r,i,o,s,l,u=0,c=e.length;if(c>2){for(l=0;l<c;l++)l===c-2?(i=c-2,o=c-1,s=0):l===c-1?(i=c-1,o=0,s=1):(i=l,o=l+1,s=l+2),t=e[i],r=e[o],u+=(a(e[s][0])-a(t[0]))*Math.sin(a(r[1]));u=u*n*n/2}return u}function a(e){return e*Math.PI/180}t.default=function(e){return i.geomReduce(e,(function(e,t){return e+function(e){var t,r=0;switch(e.type){case"Polygon":return o(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)r+=o(e.coordinates[t]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)}),0)}},338:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=r(540),n=r(102);t.default=function(e,t){void 0===t&&(t={});var r=0,o=0,s=0;return i.coordEach(e,(function(e){r+=e[0],o+=e[1],s++}),!0),n.point([r/s,o/s],t.properties)}},102:(e,t)=>{function r(e,t,r){void 0===r&&(r={});var i={type:"Feature"};return(0===r.id||r.id)&&(i.id=r.id),r.bbox&&(i.bbox=r.bbox),i.properties=t||{},i.geometry=e,i}function i(e,t,i){if(void 0===i&&(i={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!f(e[0])||!f(e[1]))throw new Error("coordinates must contain numbers");return r({type:"Point",coordinates:e},t,i)}function n(e,t,i){void 0===i&&(i={});for(var n=0,o=e;n<o.length;n++){var s=o[n];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:e},t,i)}function o(e,t,i){if(void 0===i&&(i={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:e},t,i)}function s(e,t){void 0===t&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function a(e,t,i){return void 0===i&&(i={}),r({type:"MultiLineString",coordinates:e},t,i)}function l(e,t,i){return void 0===i&&(i={}),r({type:"MultiPoint",coordinates:e},t,i)}function u(e,t,i){return void 0===i&&(i={}),r({type:"MultiPolygon",coordinates:e},t,i)}function c(e,r){void 0===r&&(r="kilometers");var i=t.factors[r];if(!i)throw new Error(r+" units is invalid");return e*i}function d(e,r){void 0===r&&(r="kilometers");var i=t.factors[r];if(!i)throw new Error(r+" units is invalid");return e/i}function h(e){return e%(2*Math.PI)*180/Math.PI}function f(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.earthRadius=6371008.8,t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:1.0936*t.earthRadius},t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1.0936133},t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},t.feature=r,t.geometry=function(e,t,r){switch(void 0===r&&(r={}),e){case"Point":return i(t).geometry;case"LineString":return o(t).geometry;case"Polygon":return n(t).geometry;case"MultiPoint":return l(t).geometry;case"MultiLineString":return a(t).geometry;case"MultiPolygon":return u(t).geometry;default:throw new Error(e+" is invalid")}},t.point=i,t.points=function(e,t,r){return void 0===r&&(r={}),s(e.map((function(e){return i(e,t)})),r)},t.polygon=n,t.polygons=function(e,t,r){return void 0===r&&(r={}),s(e.map((function(e){return n(e,t)})),r)},t.lineString=o,t.lineStrings=function(e,t,r){return void 0===r&&(r={}),s(e.map((function(e){return o(e,t)})),r)},t.featureCollection=s,t.multiLineString=a,t.multiPoint=l,t.multiPolygon=u,t.geometryCollection=function(e,t,i){return void 0===i&&(i={}),r({type:"GeometryCollection",geometries:e},t,i)},t.round=function(e,t){if(void 0===t&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r},t.radiansToLength=c,t.lengthToRadians=d,t.lengthToDegrees=function(e,t){return h(d(e,t))},t.bearingToAzimuth=function(e){var t=e%360;return t<0&&(t+=360),t},t.radiansToDegrees=h,t.degreesToRadians=function(e){return e%360*Math.PI/180},t.convertLength=function(e,t,r){if(void 0===t&&(t="kilometers"),void 0===r&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return c(d(e,t),r)},t.convertArea=function(e,r,i){if(void 0===r&&(r="meters"),void 0===i&&(i="kilometers"),!(e>=0))throw new Error("area must be a positive number");var n=t.areaFactors[r];if(!n)throw new Error("invalid original units");var o=t.areaFactors[i];if(!o)throw new Error("invalid final units");return e/n*o},t.isNumber=f,t.isObject=function(e){return!!e&&e.constructor===Object},t.validateBBox=function(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach((function(e){if(!f(e))throw new Error("bbox must only contain numbers")}))},t.validateId=function(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}},540:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=r(102);function n(e,t,r){if(null!==e)for(var i,o,s,a,l,u,c,d,h=0,f=0,p=e.type,g="FeatureCollection"===p,m="Feature"===p,y=g?e.features.length:1,v=0;v<y;v++){l=(d=!!(c=g?e.features[v].geometry:m?e.geometry:e)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var b=0;b<l;b++){var P=0,w=0;if(null!==(a=d?c.geometries[b]:c)){u=a.coordinates;var E=a.type;switch(h=!r||"Polygon"!==E&&"MultiPolygon"!==E?0:1,E){case null:break;case"Point":if(!1===t(u,f,v,P,w))return!1;f++,P++;break;case"LineString":case"MultiPoint":for(i=0;i<u.length;i++){if(!1===t(u[i],f,v,P,w))return!1;f++,"MultiPoint"===E&&P++}"LineString"===E&&P++;break;case"Polygon":case"MultiLineString":for(i=0;i<u.length;i++){for(o=0;o<u[i].length-h;o++){if(!1===t(u[i][o],f,v,P,w))return!1;f++}"MultiLineString"===E&&P++,"Polygon"===E&&w++}"Polygon"===E&&P++;break;case"MultiPolygon":for(i=0;i<u.length;i++){for(w=0,o=0;o<u[i].length;o++){for(s=0;s<u[i][o].length-h;s++){if(!1===t(u[i][o][s],f,v,P,w))return!1;f++}w++}P++}break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)if(!1===n(a.geometries[i],t,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&!1!==t(e.features[r].properties,r);r++);break;case"Feature":t(e.properties,0)}}function s(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var r=0;r<e.features.length&&!1!==t(e.features[r],r);r++);}function a(e,t){var r,i,n,o,s,a,l,u,c,d,h=0,f="FeatureCollection"===e.type,p="Feature"===e.type,g=f?e.features.length:1;for(r=0;r<g;r++){for(a=f?e.features[r].geometry:p?e.geometry:e,u=f?e.features[r].properties:p?e.properties:{},c=f?e.features[r].bbox:p?e.bbox:void 0,d=f?e.features[r].id:p?e.id:void 0,s=(l=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,n=0;n<s;n++)if(null!==(o=l?a.geometries[n]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(o,h,u,c,d))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===t(o.geometries[i],h,u,c,d))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,h,u,c,d))return!1;h++}}function l(e,t){a(e,(function(e,r,n,o,s){var a,l=null===e?null:e.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==t(i.feature(e,n,{bbox:o,id:s}),r,0)&&void 0}switch(l){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var u=0;u<e.coordinates.length;u++){var c={type:a,coordinates:e.coordinates[u]};if(!1===t(i.feature(c,n),r,u))return!1}}))}function u(e,t){l(e,(function(e,r,o){var s=0;if(e.geometry){var a=e.geometry.type;if("Point"!==a&&"MultiPoint"!==a){var l,u=0,c=0,d=0;return!1!==n(e,(function(n,a,h,f,p){if(void 0===l||r>u||f>c||p>d)return l=n,u=r,c=f,d=p,void(s=0);var g=i.lineString([l,n],e.properties);if(!1===t(g,r,o,p,s))return!1;s++,l=n}))&&void 0}}}))}function c(e,t){if(!e)throw new Error("geojson is required");l(e,(function(e,r,n){if(null!==e.geometry){var o=e.geometry.type,s=e.geometry.coordinates;switch(o){case"LineString":if(!1===t(e,r,n,0,0))return!1;break;case"Polygon":for(var a=0;a<s.length;a++)if(!1===t(i.lineString(s[a],e.properties),r,n,a))return!1}}}))}t.coordAll=function(e){var t=[];return n(e,(function(e){t.push(e)})),t},t.coordEach=n,t.coordReduce=function(e,t,r,i){var o=r;return n(e,(function(e,i,n,s,a){o=0===i&&void 0===r?e:t(o,e,i,n,s,a)}),i),o},t.featureEach=s,t.featureReduce=function(e,t,r){var i=r;return s(e,(function(e,n){i=0===n&&void 0===r?e:t(i,e,n)})),i},t.findPoint=function(e,t){if(t=t||{},!i.isObject(t))throw new Error("options is invalid");var r,n=t.featureIndex||0,o=t.multiFeatureIndex||0,s=t.geometryIndex||0,a=t.coordIndex||0,l=t.properties;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),l=l||e.features[n].properties,r=e.features[n].geometry;break;case"Feature":l=l||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var u=r.coordinates;switch(r.type){case"Point":return i.point(u,l,t);case"MultiPoint":return o<0&&(o=u.length+o),i.point(u[o],l,t);case"LineString":return a<0&&(a=u.length+a),i.point(u[a],l,t);case"Polygon":return s<0&&(s=u.length+s),a<0&&(a=u[s].length+a),i.point(u[s][a],l,t);case"MultiLineString":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a),i.point(u[o][a],l,t);case"MultiPolygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),a<0&&(a=u[o][s].length-a),i.point(u[o][s][a],l,t)}throw new Error("geojson is invalid")},t.findSegment=function(e,t){if(t=t||{},!i.isObject(t))throw new Error("options is invalid");var r,n=t.featureIndex||0,o=t.multiFeatureIndex||0,s=t.geometryIndex||0,a=t.segmentIndex||0,l=t.properties;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),l=l||e.features[n].properties,r=e.features[n].geometry;break;case"Feature":l=l||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var u=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=u.length+a-1),i.lineString([u[a],u[a+1]],l,t);case"Polygon":return s<0&&(s=u.length+s),a<0&&(a=u[s].length+a-1),i.lineString([u[s][a],u[s][a+1]],l,t);case"MultiLineString":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a-1),i.lineString([u[o][a],u[o][a+1]],l,t);case"MultiPolygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),a<0&&(a=u[o][s].length-a-1),i.lineString([u[o][s][a],u[o][s][a+1]],l,t)}throw new Error("geojson is invalid")},t.flattenEach=l,t.flattenReduce=function(e,t,r){var i=r;return l(e,(function(e,n,o){i=0===n&&0===o&&void 0===r?e:t(i,e,n,o)})),i},t.geomEach=a,t.geomReduce=function(e,t,r){var i=r;return a(e,(function(e,n,o,s,a){i=0===n&&void 0===r?e:t(i,e,n,o,s,a)})),i},t.lineEach=c,t.lineReduce=function(e,t,r){var i=r;return c(e,(function(e,n,o,s){i=0===n&&void 0===r?e:t(i,e,n,o,s)})),i},t.propEach=o,t.propReduce=function(e,t,r){var i=r;return o(e,(function(e,n){i=0===n&&void 0===r?e:t(i,e,n)})),i},t.segmentEach=u,t.segmentReduce=function(e,t,r){var i=r,n=!1;return u(e,(function(e,o,s,a,l){i=!1===n&&void 0===r?e:t(i,e,o,s,a,l),n=!0})),i}},607:function(e,t,r){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},s=this&&this.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r};Object.defineProperty(t,"__esModule",{value:!0}),t.MeasureType=void 0;const a=o(r(89)),l=r(593);var u;!function(e){e.Distance="distance",e.Area="area"}(u||(t.MeasureType=u={})),t.default=class{constructor(e,t){this.measureType=u.Distance,this.tempPositions=[],this.viewer=e,this.options=Object.assign({showAllDistance:!0,showAllDistancePosition:"center",polylineStyle:{},polygonStyle:{},labelStyle:{}},t),this.dataSource=new a.CustomDataSource("Measure_dataSource"),this.viewer.dataSources.add(this.dataSource),this.viewer.cesiumWidget.screenSpaceEventHandler.removeInputAction(a.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),this.handler=new a.ScreenSpaceEventHandler(this.viewer.scene.canvas)}activate(e){this.clearAll(),this.measureType=e,this.registerEvents(),this.viewer._element.style.cursor="crosshair"}deactivate(){this.unRegisterEvents(),this._mousePos=void 0,this.viewer._element.style.cursor="default"}clearAll(){var e;this.deactivate(),null===(e=this.dataSource)||void 0===e||e.entities.removeAll(),this.tempPositions=[]}registerEvents(){this.leftClickEvent(),this.rightClickEvent(),this.mouseMoveEvent()}unRegisterEvents(){var e,t,r,i;null===(e=this.handler)||void 0===e||e.removeInputAction(a.ScreenSpaceEventType.RIGHT_CLICK),null===(t=this.handler)||void 0===t||t.removeInputAction(a.ScreenSpaceEventType.LEFT_CLICK),null===(r=this.handler)||void 0===r||r.removeInputAction(a.ScreenSpaceEventType.MOUSE_MOVE),null===(i=this.handler)||void 0===i||i.removeInputAction(a.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)}drawEnd(){var e,t;null===(t=null===(e=this.options)||void 0===e?void 0:e.onDrawEnd)||void 0===t||t.call(e,this.measureType,this.tempPositions),this.deactivate()}leftClickEvent(){var e;null===(e=this.handler)||void 0===e||e.setInputAction((e=>{let t=this.viewer.camera.getPickRay(e.position);if(!t)return;let r=this.viewer.scene.globe.pick(t,this.viewer.scene);r&&(this.tempPositions.push(r.clone()),this.drawStart2InitEntity(),this.refreshEntityLabel())}),a.ScreenSpaceEventType.LEFT_CLICK)}mouseMoveEvent(){var e;null===(e=this.handler)||void 0===e||e.setInputAction((e=>{if(0===this.tempPositions.length)return;let t=this.viewer.camera.getPickRay(e.endPosition);if(!t)return;let r=this.viewer.scene.globe.pick(t,this.viewer.scene);r&&(this._mousePos=r,this.refreshEntityLabel())}),a.ScreenSpaceEventType.MOUSE_MOVE)}rightClickEvent(){var e;null===(e=this.handler)||void 0===e||e.setInputAction((e=>{let t=this.viewer.camera.getPickRay(e.position);if(!t)return;let r=this.viewer.scene.globe.pick(t,this.viewer.scene);r&&(this.tempPositions.push(r.clone()),this.drawEnd(),this.refreshEntityLabel())}),a.ScreenSpaceEventType.RIGHT_CLICK)}drawStart2InitEntity(){if(1===this.tempPositions.length)switch(this.measureType){case u.Distance:this.addMeasureDistanceEntity();break;case u.Area:this.addMeasureAreaEntity()}}refreshEntityLabel(){switch(this.measureType){case u.Distance:this.addMeasureDistanceEntityLabel();break;case u.Area:this.addMeasureAreaEntityLabel()}}addMeasureDistanceEntity(){var e,t;const r=this.options.polylineStyle||{},{positions:i}=r,n=s(r,["positions"]),o=`${this.measureType}-id`;null===(e=this.dataSource)||void 0===e||e.entities.removeById(o),null===(t=this.dataSource)||void 0===t||t.entities.add({id:o,polyline:Object.assign({positions:new a.CallbackProperty((()=>{let e=Array.from(this.tempPositions);return this._mousePos&&e.push(this._mousePos),e}),!1),clampToGround:!0,width:3,material:new a.PolylineDashMaterialProperty({color:a.Color.YELLOW}),depthFailMaterial:new a.PolylineDashMaterialProperty({color:a.Color.YELLOW})},n)})}addMeasureAreaEntity(){var e,t;const r=this.options.polygonStyle||{},{hierarchy:i}=r,n=s(r,["hierarchy"]),o=this.options.polylineStyle||{},{positions:l}=o,u=s(o,["positions"]),c=`${this.measureType}-id`;null===(e=this.dataSource)||void 0===e||e.entities.removeById(c),null===(t=this.dataSource)||void 0===t||t.entities.add({id:c,polygon:Object.assign({hierarchy:new a.CallbackProperty((()=>{if(this.tempPositions.length>=2){let e=Array.from(this.tempPositions);return this._mousePos&&e.push(this._mousePos),new a.PolygonHierarchy(e)}}),!1),material:a.Color.RED.withAlpha(.4)},n),polyline:Object.assign({positions:new a.CallbackProperty((()=>{let e=Array.from(this.tempPositions);return this._mousePos&&e.push(this._mousePos),e.push(e[0]),e}),!1),clampToGround:!0,width:3,material:new a.PolylineDashMaterialProperty({color:a.Color.YELLOW}),depthFailMaterial:new a.PolylineDashMaterialProperty({color:a.Color.YELLOW})},u)})}addMeasureDistanceEntityLabel(){if(this._mousePos){const e=this.tempPositions.length;if(e>=1){let[t,r]=[this.tempPositions[e-1],this._mousePos];const i=(0,l._mathMidpoint)(t,r),n=(0,l._calcDistance2text)(t,r);this.addLabel(i,n,e)}}else{const e=this.tempPositions.length;if(e>=2){let[t,r]=[this.tempPositions[e-1],this.tempPositions[e-2]];const i=(0,l._mathMidpoint)(t,r),n=(0,l._calcDistance2text)(t,r);if(this.addLabel(i,n,e),this.options.showAllDistance&&e>=3){const e=(0,l._calcAllDistance2text)(this.tempPositions);if("center"===this.options.showAllDistancePosition){let t=[...this.tempPositions,this.tempPositions[0]];const{centroid:r}=(0,l._mathAreaAndCenter)(t);this.addLabel(r,e,0)}else this.addLabel(t,e,0)}}}}addMeasureAreaEntityLabel(){if(this._mousePos){if(this.tempPositions.length>=2){let e=[...this.tempPositions,this._mousePos,this.tempPositions[0]];const{text:t,centroid:r}=(0,l._calcArea2text)(e);this.addLabel(r,t)}}else if(this.tempPositions.length>=3){let e=[...this.tempPositions,this.tempPositions[0]];const{text:t,centroid:r}=(0,l._calcArea2text)(e);this.addLabel(r,t)}}addLabel(e,t,r=1){var i,n;const o=this.options.labelStyle||{},{text:l}=o,u=s(o,["text"]),c=`${this.measureType}-id-label-${r}`;null===(i=this.dataSource)||void 0===i||i.entities.removeById(c),null===(n=this.dataSource)||void 0===n||n.entities.add({id:c,position:e,label:Object.assign({text:t,font:"14px sans-serif",style:a.LabelStyle.FILL_AND_OUTLINE,fillColor:a.Color.YELLOW,showBackground:!0,backgroundColor:new a.Color(.165,.165,.165,.8),backgroundPadding:new a.Cartesian2(6,6),pixelOffset:new a.Cartesian2(0,-25),disableDepthTestDistance:Number.POSITIVE_INFINITY},u)})}}},593:function(e,t,r){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t._mathAreaAndCenter=t._calcArea2text=t._calcAllDistance2text=t._calcDistance2text=t._mathMidpoint=t._mathDistance=t._degree2Cartesian=t._cartesian2Degree=void 0;const a=o(r(89)),l=r(102),u=s(r(70)),c=s(r(338));t._cartesian2Degree=e=>{const t=a.Cartographic.fromCartesian(e);return[a.Math.toDegrees(t.longitude),a.Math.toDegrees(t.latitude),t.height]},t._degree2Cartesian=e=>a.Cartesian3.fromDegrees(e[0],e[1],e[3]),t._mathDistance=(e,t)=>a.Cartesian3.distance(e,t),t._mathMidpoint=(e,t)=>a.Cartesian3.midpoint(e,t,new a.Cartesian3),t._calcDistance2text=(e,r)=>{let i="";const n=(0,t._mathDistance)(e,r);return i=n>1e3?(n/1e3).toFixed(2)+" km":n.toFixed(2)+" m",i},t._calcAllDistance2text=e=>{let r=0;for(let i=0;i<e.length-1;i++){const[n,o]=[e[i],e[i+1]];r+=(0,t._mathDistance)(n,o)}let i="";return i=r>1e3?(r/1e3).toFixed(2)+" km":r.toFixed(2)+" m","总长："+i},t._calcArea2text=e=>{let r="";const{area:i,centroid:n}=(0,t._mathAreaAndCenter)(e);return r=i<1e6?Math.abs(i).toFixed(4)+" ㎡":Math.abs(Number((i/1e6).toFixed(4)))+" k㎡",{text:r,centroid:n}},t._mathAreaAndCenter=e=>{const r=e.map((e=>(0,t._cartesian2Degree)(e))),i=(0,l.polygon)([r]),n=(0,u.default)(i),o=(0,c.default)(i).geometry.coordinates;return{area:n,centroid:(0,t._degree2Cartesian)(o)}}},89:t=>{t.exports=e}},r={},i=function e(i){var n=r[i];if(void 0!==n)return n.exports;var o=r[i]={exports:{}};return t[i].call(o.exports,o,o.exports,e),o.exports}(607);return i.default})()));